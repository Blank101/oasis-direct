import React, { Component } from 'react';
import web3 from '../web3';
import config from "../exporter-config.json";
import ReactDOM from 'react-dom';

import matchingmarket from '../abi/matchingmarket.json';

class TaxExporter extends Component {
  constructor(props) {
    super();
    this.props = props;
    this.state = {
      isLoading: false,
      accounts: [
        this.props.account,
      ],
      newAddress: "",
      csvData: []
    }
  }

  removeAccount = id => {
    // making copy of the accounts
    let temp = [...this.state.accounts];

    // Splice removes the selected element and modifies the array beneath
    // We discard the returned value because we care only in the modified version
    temp.splice(id, 1);

    // Set the new array with the removed account
    this.setState({accounts: temp});
  }

  addAccount = event => {
    event.preventDefault();
    const address = (this.state.newAddress || "").trim();

    if (web3.isAddress(address)) {
      const accounts = [...this.state.accounts];

      if (!accounts.includes(address)) {
        accounts.push(address);
        this.setState({accounts,newAddress:''});
      } else {
        alert("This address is already in the list");
      }
    } else {
      alert("This is not a valid address");
    }
  }

  getPossibleProxies = address => {
    return new Promise((resolve, reject) => {
      this.props.proxyRegistryObj.proxiesCount(address, async (e, r) => {
        if (!e) {
          const proxies = [];
          if (r.gt(0)) {
            for (let i = r.toNumber() - 1; i >= 0; i--) {
              proxies.push(await this.props.getProxy(i));
            }
          }
          resolve(proxies);
        } else {
          reject(e);
        }
      });
    });
  }

  fetchOasisTradesFromAccount = (contract, filter) => {
    return new Promise((resolve, reject) => {
      web3.eth.contract(matchingmarket.abi).at(contract.address).LogTake(filter, {
        fromBlock: contract.block_start,
        toBlock: contract.block_end
      }).get((error, logs) => {
        if (!error) {
          resolve(logs);
        } else {
          reject(error);
        }
      });
    });
  }

  getOwnerTransaction = tx => {
    return new Promise((resolve, reject) => {
      web3.eth.getTransactionReceipt(tx, (e, r) => {
        if (!e) {
          resolve(r.from);
        } else {
          reject(e);
        }
      })
    });
  }

  fetchOasisMakeTrades = (contract, address) => {
    return new Promise((resolve, reject) => {
      Promise.resolve(this.fetchOasisTradesFromAccount(contract, {maker: address})).then(logs => {
        const promises = [];
        logs.forEach(log => {
          promises.push(this.addOasisTradeFor(address, 'maker', log.args));
        });
        Promise.all(promises).then(() => resolve(true));
      }).catch(() => {
        reject();
      })
    });
  }

  fetchOasisTakeTrades = (contract, address) => {
    return new Promise(async (resolve, reject) => {
      const promises = [];
      const proxiesAddr = await this.getPossibleProxies(address);
      promises.push(this.fetchOasisTradesFromAccount(contract, {taker: address}));
      proxiesAddr.forEach(proxyAddr => {
        promises.push(this.fetchOasisTradesFromAccount(contract, {taker: proxyAddr}));
      });
      config.supportContracts[this.props.network].forEach(supportContract => {
        promises.push(this.fetchOasisTradesFromAccount(contract, {taker: supportContract.address}));
      });
      Promise.all(promises).then(async r => {
        const promises2 = [];
        for (let i = 0; i < r.length; i++) {
          for (let j = 0; j < r[i].length; j++) {
            const owner = await this.getOwnerTransaction(r[i][j].transactionHash);
            if (i === 0 || owner === address) {
              // For the cases of proxy trades we need to verify if they were done by the address requested or the proxy might have been transferred before
              promises2.push(this.addOasisTradeFor(address, 'taker', r[i][j].args));
            }
          }
        }
        Promise.all(promises2).then(() => resolve(true));
      }).catch(() => {
        reject();
      })
    });
  }

  fetchData = e => {
    e.preventDefault();
    // this.setLoading(true);
    let accounts = {...this.state.accounts};
    let oasisPromises = [];
    this.setState({csvData: []}, () => {
      Object.keys(accounts).forEach(key => {
        config.oasis.contract[this.props.network].forEach(contract => {
          oasisPromises.push(this.fetchOasisMakeTrades(contract, accounts[key]));
          oasisPromises.push(this.fetchOasisTakeTrades(contract, accounts[key]));
        });
        // oasisPromises.push(this.fetchLegacyTrades(accounts[key]));
      });

      Promise.all(oasisPromises).then(() => {
        console.log('download CSV')
        this.downloadCSV();
        // this.setLoading(false);
      });
    });
  }

  fetchLegacyTrades = address => {
    return new Promise((resolve, reject) => {
      // for (let j = 2; j < 15; j++) {
      //   HTTP.get(Meteor.absoluteUrl("/maker-otc-" + j + ".trades.json"), (err, result) => {
      //     let data = result.data;
      //     for (let i = 0; i < data.length; i++) {
      //       const taker = EthUtils.addHexPrefix(data[i].taker);
      //       const maker = EthUtils.addHexPrefix(data[i].maker);
      //       if (taker === address.name || maker === address.name) {
      //           this.addOasisLegacyTradeFor(address, data[i])
      //       }
      //     }
      //   });
      // }
      resolve();
    });
  }

  addOasisTradeFor = (address, side, log) => {
    return new Promise((resolve, reject) => {
      const sellAmount = web3.fromWei(side === 'maker' ? log.take_amt : log.give_amt).toString(10);
      const buyAmount = web3.fromWei(side === 'maker' ? log.give_amt : log.take_amt).toString(10);
      let sellTokenAddress = side === 'maker' ? log.pay_gem : log.buy_gem;
      let buyTokenAddress = side === 'maker' ? log.buy_gem : log.pay_gem;
      let sellToken = config.tokens[this.props.network][sellTokenAddress];
      let buyToken = config.tokens[this.props.network][buyTokenAddress];

      let timestamp = new Date(log.timestamp * 1000).toLocaleString();

      let trade = {
        'Type': 'Trade',
        'Buy': buyAmount,
        'Buy_Cur': buyToken,
        'Sell': sellAmount,
        'Sell_Cur': sellToken,
        'Fee': '',
        'Fee_Cur': '',
        'Exchange': 'Oasisdex.com',
        'Group': '',
        'Comment': address,
        'Date': timestamp,
      };

      //add trade to CSV
      Promise.resolve(this.addTradeToCSV(trade)).then(() => resolve(true));
      // account.trades.push(trade);
    });
  }

  // addOasisLegacyTradeFor = (address, log) => {
  //   let giveAmount = web3.fromWei(web3.toBigNumber(log.giveAmount, 16).toString(10));
  //   let takeAmount = web3.fromWei(web3.toBigNumber(log.takeAmount, 16).toString(10));
  //   // let haveTokenAddress = EthUtils.addHexPrefix(log.haveToken);
  //   // let wantTokenAddress = EthUtils.addHexPrefix(log.wantToken);
  //   let haveTokenAddress = `0x${log.haveToken}`;
  //   let wantTokenAddress = `0x${log.wantToken}`;
  //   let wantToken = config.tokens[this.props.network][haveTokenAddress];
  //   let haveToken = config.tokens[this.props.network][wantTokenAddress];
  //   let timestamp = new Date(log.timestamp * 1000).toLocaleString();

  //   let trade = {
  //     'Type': 'Trade',
  //     'Buy': takeAmount,
  //     'Buy_Cur': wantToken,
  //     'Sell': giveAmount,
  //     'Sell_Cur': haveToken,
  //     'Fee': '',
  //     'Fee_Cur': '',
  //     'Exchange': 'Oasisdex.com',
  //     'Group': '',
  //     'Comment': address,
  //     'Date': timestamp,
  //   };

  //   //add trade to CSV
  //   this.addTradeToCSV(trade);

  //   account.trades.push(trade);
  // }

  addTradeToCSV = trade => {
    return new Promise((resolve, reject) => {
      const tradeData = typeof trade !== 'object' ? JSON.parse(trade) : trade;
      let row = '';
      for (let i in tradeData) {
        row += '"' + tradeData[i] + '",';
      }
      row += row.slice(0, row.length - 1) + '\r\n';

      //add a line break after each row
      this.setState(prevState => {
        const csvData = {...prevState.csvData};
        csvData[Object.keys(csvData).length] = row;
        return {csvData};
      }, () => resolve(true));
    });
  }

  downloadCSV = () => {
    const fileName = 'TaxReport';
    const csvData = {...this.state.csvData};
    var uri = 'data:text/csv;charset=utf-8,' + encodeURIComponent(`Type,Buy,Cur.,Sell,Cur.,Fee,Cur.,Exchange,Comment,Date\r\n${Object.keys(csvData).map(key => csvData[key]).join('')}`);
    const link = document.createElement("a");
    link.href = uri;

    link.style = 'visibility:hidden';
    link.download = fileName + ".csv";

    //this part will append the anchor tag and remove it after automatic click
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }

  render() {
    return (
      <section className="frame exporter">
        <div className="heading">
          <h2>Export Trades</h2>
        </div>
        <div className="content">
          <div className="panel">
            <ul className="list">
              {
                this.state.accounts.map((account, index) => {
                  return (
                    <li key={index} className="list-item">
                      <span className="address">{account}</span>
                      <button onClick={() => {
                        this.removeAccount(index);
                      }} className="close"/>
                    </li>
                  )
                })
              }
            </ul>
          </div>
          <div style={{marginBottom:'16px'}}>
            <input type="text" value={this.state.newAddress} onChange={(event) => {this.setState({newAddress:event.target.value})}} placeholder="0x"/>
            <button disabled={!this.state.newAddress} onClick={this.addAccount}>ADD</button>
          </div>
          <div className="exchanges">
            <div className="heading">
              <h3>Exchanges</h3>
            </div>
            <div style={{marginBottom:'20px'}}>
              <ul className="list">
                <li className="list-item oasis">
                  <svg width='100' height='26' viewBox='0 0 100 26' xmlns='http://www.w3.org/2000/svg' style={{backgroundColor: '#fff'}}>
                    <g id='oasisLogo' fill='none' fillRule='evenodd'>
                      <path d='M64.1059073,9.64090928 L67.5662469,9.64090928 L67.5662469,21.4136366 L64.1059073,21.4136366 L64.1059073,9.64090928 Z M65.8360771,8.68636383 C64.706795,8.68636383 63.791331,7.76040729 63.791331,6.61818201 C63.791331,5.47595673 64.706795,4.55000019 65.8360771,4.55000019 C66.9653592,4.55000019 67.8808233,5.47595673 67.8808233,6.61818201 C67.8808233,7.76040729 66.9653592,8.68636383 65.8360771,8.68636383 Z M43.7213604,21.4136366 C40.6809855,21.4136366 38.2162747,18.6001532 38.2162747,15.1295456 C38.2162747,11.6589381 40.6809855,8.84545474 43.7213604,8.84545474 C45.0850744,8.84545474 46.3773658,9.41139816 47.3389882,10.3488658 L47.3389882,9.16363655 L50.6420396,9.16363655 L50.6420396,21.4136366 L47.3389882,21.4136366 L47.3389882,20.2744998 C46.3839981,21.1843469 45.0625363,21.4136366 43.7213604,21.4136366 Z M44.5078012,18.0727275 C46.0714226,18.0727275 47.3389882,16.7906338 47.3389882,15.2090911 C47.3389882,13.6275484 46.0714226,12.3454547 44.5078012,12.3454547 C42.9441798,12.3454547 41.6766143,13.6275484 41.6766143,15.2090911 C41.6766143,16.7906338 42.9441798,18.0727275 44.5078012,18.0727275 Z M28.7789849,21.4136366 C24.2618565,21.4136366 20.6000004,17.7098104 20.6000004,13.1409093 C20.6000004,8.57200817 24.2618565,4.86818201 28.7789849,4.86818201 C33.2961133,4.86818201 36.9579694,8.57200817 36.9579694,13.1409093 C36.9579694,17.7098104 33.2961133,21.4136366 28.7789849,21.4136366 Z M28.7789849,17.9136366 C31.3850205,17.9136366 33.4976298,15.7768138 33.4976298,13.1409093 C33.4976298,10.5050048 31.3850205,8.36818201 28.7789849,8.36818201 C26.1729493,8.36818201 24.06034,10.5050048 24.06034,13.1409093 C24.06034,15.7768138 26.1729493,17.9136366 28.7789849,17.9136366 Z M69.6739074,19.1068799 L71.4355655,16.9273422 C72.7313503,18.0692355 73.8743007,18.6366572 74.8644168,18.6296072 C75.7871535,18.6296072 76.2485219,18.2053648 76.2485219,17.3568799 C76.2485219,16.7140065 75.5774359,16.3427944 74.2352641,16.2432436 C71.4355143,15.7129405 70.0356394,14.387183 70.0356394,12.2659708 C70.3184947,9.75171687 71.8232283,8.48959307 74.5498404,8.47959943 C76.2275808,8.47345014 77.7532555,9.01436311 79.1268645,10.1023384 L77.6169596,12.2500656 C76.4091621,11.5979942 75.386789,11.2479955 74.5498404,11.2000695 C73.6068494,11.1460713 73.0825556,11.5013717 72.9769588,12.2659708 C72.9769588,12.9023345 73.3963939,13.2576349 74.2352641,13.3318722 C77.6956037,13.7561146 79.4047813,15.1508141 79.3627968,17.5159708 C79.3471294,21.0159708 75.9654339,21.413639 74.8644168,21.4136981 C73.7633996,21.4137572 72.0344562,21.2575444 69.6739074,19.1068799 Z M52.3722094,19.1068799 L54.1338675,16.9273422 C55.4296523,18.0692355 56.5726027,18.6366572 57.5627188,18.6296072 C58.4854555,18.6296072 58.9468239,18.2053648 58.9468239,17.3568799 C58.9468239,16.7140065 58.275738,16.3427944 56.9335661,16.2432436 C54.1338163,15.7129405 52.7339414,14.387183 52.7339414,12.2659708 C53.0167967,9.75171687 54.5215304,8.48959307 57.2481425,8.47959943 C58.9258829,8.47345014 60.4515576,9.01436311 61.8251666,10.1023384 L60.3152616,12.2500656 C59.1074641,11.5979942 58.085091,11.2479955 57.2481425,11.2000695 C56.3051515,11.1460713 55.7808576,11.5013717 55.6752608,12.2659708 C55.6752608,12.9023345 56.0946959,13.2576349 56.9335661,13.3318722 C60.3939057,13.7561146 62.1030833,15.1508141 62.0610988,17.5159708 C62.0454314,21.0159708 58.6637359,21.413639 57.5627188,21.4136981 C56.4617016,21.4137572 54.7327583,21.2575444 52.3722094,19.1068799 Z'
                            fill='#3F51B5' />
                    </g>
                  </svg>
                </li>
                <li className="list-item etherDelta disabled">
                  <svg width='100' height='26' viewBox='0 0 100 26' xmlns='http://www.w3.org/2000/svg' style={{backgroundColor: '#fff'}}>
                    <g id='etherDeltaLogo' fill='none' fillRule='evenodd'>
                      <path d='M6.156,17.976 L12.22,17.976 L12.22,19 L5.004,19 L5.004,7.672 L12.028,7.672 L12.028,8.696 L6.156,8.696 L6.156,12.6 L11.644,12.6 L11.644,13.608 L6.156,13.608 L6.156,17.976 Z M19.388,12.424 L17.276,12.424 L17.276,16.792 C17.276,17.0693347 17.3026664,17.2986658 17.356,17.48 C17.4093336,17.6613342 17.4866662,17.8026662 17.588,17.904 C17.6893339,18.0053338 17.8093327,18.0746665 17.948,18.112 C18.0866674,18.1493335 18.2359992,18.168 18.396,18.168 C18.5453341,18.168 18.7026659,18.1466669 18.868,18.104 C19.0333342,18.0613331 19.1906659,18.002667 19.34,17.928 L19.388,18.872 C19.1959991,18.946667 18.9960011,19.0026665 18.788,19.04 C18.579999,19.0773335 18.3533346,19.096 18.108,19.096 C17.9053323,19.096 17.6920011,19.0693336 17.468,19.016 C17.2439989,18.9626664 17.036001,18.8613341 16.844,18.712 C16.6519991,18.5626659 16.4946673,18.3600013 16.372,18.104 C16.2493327,17.8479987 16.188,17.5120021 16.188,17.096 L16.188,12.424 L14.636,12.424 L14.636,11.512 L16.188,11.512 L16.188,9.4 L17.276,9.4 L17.276,11.512 L19.388,11.512 L19.388,12.424 Z M23.836,12.744 C24.0386677,12.3066645 24.3746644,11.9600013 24.844,11.704 C25.3133357,11.4479987 25.814664,11.32 26.348,11.32 C27.2973381,11.32 28.009331,11.6026638 28.484,12.168 C28.9586691,12.7333362 29.196,13.4799954 29.196,14.408 L29.196,19 L28.108,19 L28.108,14.856 C28.108,14.4613314 28.0760004,14.1040016 28.012,13.784 C27.9479997,13.4639984 27.8386675,13.1893345 27.684,12.96 C27.5293326,12.7306655 27.3213347,12.5520006 27.06,12.424 C26.7986654,12.2959994 26.4706687,12.232 26.076,12.232 C25.7879986,12.232 25.5080014,12.2906661 25.236,12.408 C24.9639987,12.5253339 24.7213344,12.7039988 24.508,12.944 C24.2946656,13.1840012 24.1240007,13.4879982 23.996,13.856 C23.8679994,14.2240018 23.804,14.6586642 23.804,15.16 L23.804,19 L22.716,19 L22.716,6.904 L23.804,6.904 L23.804,12.744 L23.836,12.744 Z M39.3240001,14.68 C39.2919999,13.9759965 39.0653355,13.3920023 38.6440001,12.928 C38.2226646,12.4639977 37.6226706,12.232 36.8440001,12.232 C36.4813316,12.232 36.145335,12.298666 35.8360001,12.432 C35.5266652,12.565334 35.2546679,12.7466655 35.0200001,12.976 C34.7853322,13.2053345 34.5986674,13.4666652 34.4600001,13.76 C34.3213327,14.0533348 34.2413335,14.3599984 34.2200001,14.68 L39.3240001,14.68 Z M40.4280001,15.032 L40.4280001,15.272 C40.4280001,15.3573338 40.4226668,15.4479995 40.4120001,15.544 L34.2040001,15.544 C34.2146668,15.9173352 34.2893327,16.2693317 34.4280001,16.6 C34.5666674,16.9306683 34.7586655,17.2186654 35.0040001,17.464 C35.2493346,17.7093346 35.5373318,17.9039993 35.8680001,18.048 C36.1986684,18.1920007 36.5559982,18.264 36.9400001,18.264 C37.5053362,18.264 37.9933314,18.1333346 38.4040001,17.872 C38.8146688,17.6106654 39.1266657,17.309335 39.3400001,16.968 L40.1560001,17.608 C39.7079978,18.1733362 39.2146694,18.5786654 38.6760001,18.824 C38.1373307,19.0693346 37.5586698,19.192 36.9400001,19.192 C36.3853306,19.192 35.8706691,19.0933343 35.3960001,18.896 C34.921331,18.6986657 34.5133351,18.4240018 34.1720001,18.072 C33.830665,17.7199982 33.5613344,17.3040024 33.3640001,16.824 C33.1666658,16.3439976 33.0680001,15.8213362 33.0680001,15.256 C33.0680001,14.6906638 33.1639991,14.1680024 33.3560001,13.688 C33.548001,13.2079976 33.814665,12.7920018 34.1560001,12.44 C34.4973351,12.0879982 34.8973311,11.8133343 35.3560001,11.616 C35.814669,11.4186657 36.3106641,11.32 36.8440001,11.32 C37.4306697,11.32 37.9479978,11.4186657 38.3960001,11.616 C38.8440023,11.8133343 39.2173319,12.0799983 39.5160001,12.416 C39.8146682,12.7520017 40.0413326,13.1439978 40.1960001,13.592 C40.3506675,14.0400022 40.4280001,14.5199974 40.4280001,15.032 Z M44.3640001,13.16 C44.3640001,12.9573323 44.3586668,12.6960016 44.3480001,12.376 C44.3373334,12.0559984 44.3213335,11.7680013 44.3000001,11.512 L45.3400001,11.512 C45.3613335,11.7146677 45.3773334,11.9386654 45.3880001,12.184 C45.3986668,12.4293346 45.4040001,12.6319992 45.4040001,12.792 L45.4360001,12.792 C45.6493345,12.3546645 45.9693313,12.0000014 46.3960001,11.728 C46.8226689,11.4559986 47.3026641,11.32 47.8360001,11.32 C47.9746675,11.32 48.0999995,11.3253333 48.2120001,11.336 C48.3240007,11.3466667 48.4386662,11.3679998 48.5560001,11.4 L48.4120001,12.424 C48.3479998,12.4026666 48.2413342,12.3813334 48.0920001,12.36 C47.942666,12.3386666 47.7933342,12.328 47.6440001,12.328 C47.3559987,12.328 47.0786681,12.3813328 46.8120001,12.488 C46.5453321,12.5946672 46.3133344,12.7626655 46.1160001,12.992 C45.9186658,13.2213345 45.7586674,13.5146649 45.6360001,13.872 C45.5133328,14.2293351 45.4520001,14.6586642 45.4520001,15.16 L45.4520001,19 L44.3640001,19 L44.3640001,13.16 Z'
                            fill='#000' />
                      <path d='M51.4119999,7.672 L55.4279999,7.672 C56.1640036,7.672 56.9053295,7.76799904 57.6519999,7.96 C58.3986703,8.15200096 59.0706636,8.46933112 59.6679999,8.912 C60.2653362,9.35466888 60.7506647,9.9359964 61.1239999,10.656 C61.4973351,11.3760036 61.6839999,12.269328 61.6839999,13.336 C61.6839999,14.328005 61.4973351,15.1813298 61.1239999,15.896 C60.7506647,16.6106702 60.2653362,17.197331 59.6679999,17.656 C59.0706636,18.114669 58.3986703,18.4533322 57.6519999,18.672 C56.9053295,18.8906678 56.1640036,19 55.4279999,19 L51.4119999,19 L51.4119999,7.672 Z M55.1079999,17.24 C55.6306692,17.24 56.1533306,17.1786673 56.6759999,17.056 C57.1986692,16.9333327 57.6706645,16.7253348 58.0919999,16.432 C58.5133353,16.1386652 58.8573319,15.7413358 59.1239999,15.24 C59.3906679,14.7386642 59.5239999,14.1040038 59.5239999,13.336 C59.5239999,12.5253293 59.3906679,11.8640026 59.1239999,11.352 C58.8573319,10.8399974 58.5133353,10.4400014 58.0919999,10.152 C57.6706645,9.86399856 57.1986692,9.6666672 56.6759999,9.56 C56.1533306,9.4533328 55.6306692,9.4 55.1079999,9.4 L53.4279999,9.4 L53.4279999,17.24 L55.1079999,17.24 Z M70.5479999,14.392 C70.5479999,14.1466654 70.5133336,13.9120011 70.4439999,13.688 C70.3746662,13.4639989 70.265334,13.2666675 70.1159999,13.096 C69.9666658,12.9253325 69.7773344,12.7893338 69.5479999,12.688 C69.3186654,12.5866662 69.0493348,12.536 68.7399999,12.536 C68.163997,12.536 67.6760019,12.7093316 67.2759999,13.056 C66.8759979,13.4026684 66.6546668,13.8479973 66.6119999,14.392 L70.5479999,14.392 Z M72.4679999,15.256 L72.4679999,15.512 C72.4679999,15.5973338 72.4626666,15.6826662 72.4519999,15.768 L66.6119999,15.768 C66.6333334,16.0453347 66.7053326,16.2986655 66.8279999,16.528 C66.9506672,16.7573345 67.1133322,16.9546658 67.3159999,17.12 C67.5186676,17.2853342 67.7479986,17.4159995 68.0039999,17.512 C68.2600012,17.6080005 68.5266652,17.656 68.8039999,17.656 C69.2840023,17.656 69.6893316,17.5680009 70.0199999,17.392 C70.3506682,17.2159991 70.6226655,16.9733349 70.8359999,16.664 L72.1159999,17.688 C71.3586628,18.7120051 70.2600071,19.224 68.8199999,19.224 C68.2226636,19.224 67.6733358,19.1306676 67.1719999,18.944 C66.6706641,18.7573324 66.2360018,18.493335 65.8679999,18.152 C65.4999981,17.810665 65.212001,17.3920025 65.0039999,16.896 C64.7959989,16.3999975 64.6919999,15.8373365 64.6919999,15.208 C64.6919999,14.5893302 64.7959989,14.0266692 65.0039999,13.52 C65.212001,13.0133308 65.4973314,12.5813351 65.8599999,12.224 C66.2226684,11.8666649 66.6519974,11.5893343 67.1479999,11.392 C67.6440024,11.1946657 68.179997,11.096 68.7559999,11.096 C69.2893359,11.096 69.7826643,11.1839991 70.2359999,11.36 C70.6893355,11.5360009 71.0813316,11.7973316 71.4119999,12.144 C71.7426682,12.4906684 72.0013323,12.9226641 72.1879999,13.44 C72.3746675,13.9573359 72.4679999,14.5626632 72.4679999,15.256 Z M75.956,6.904 L77.876,6.904 L77.876,19 L75.956,19 L75.956,6.904 Z M80.708,12.856 L80.708,11.32 L82.052,11.32 L82.052,9.096 L83.94,9.096 L83.94,11.32 L85.86,11.32 L85.86,12.856 L83.94,12.856 L83.94,16.424 C83.94,16.765335 84.0013327,17.0479989 84.124,17.272 C84.2466673,17.4960011 84.5213312,17.608 84.948,17.608 C85.0760006,17.608 85.2146659,17.5946668 85.364,17.568 C85.5133341,17.5413332 85.6466661,17.5013336 85.764,17.448 L85.828,18.952 C85.6573325,19.0160003 85.4546678,19.0666665 85.22,19.104 C84.9853321,19.1413335 84.7613344,19.16 84.548,19.16 C84.0359974,19.16 83.6200016,19.0880007 83.3,18.944 C82.9799984,18.7999993 82.7266676,18.6026679 82.54,18.352 C82.3533324,18.1013321 82.2253337,17.813335 82.156,17.488 C82.0866663,17.162665 82.052,16.8133352 82.052,16.44 L82.052,12.856 L80.708,12.856 Z M93.62,18.024 L93.572,18.024 C93.379999,18.365335 93.0706688,18.6453322 92.644,18.864 C92.2173312,19.0826678 91.7320027,19.192 91.188,19.192 C90.8786651,19.192 90.5560017,19.1520004 90.22,19.072 C89.8839983,18.9919996 89.5746681,18.8586676 89.292,18.672 C89.0093319,18.4853324 88.7746676,18.2400015 88.588,17.936 C88.4013324,17.6319985 88.308,17.2560022 88.308,16.808 C88.308,16.2319971 88.470665,15.773335 88.796,15.432 C89.121335,15.090665 89.5399974,14.8293342 90.052,14.648 C90.5640026,14.4666658 91.1319969,14.346667 91.756,14.288 C92.3800031,14.229333 92.9906637,14.2 93.588,14.2 L93.588,14.008 C93.588,13.5279976 93.4146684,13.1733345 93.068,12.944 C92.7213316,12.7146655 92.3080024,12.6 91.828,12.6 C91.4226646,12.6 91.0333352,12.6853325 90.66,12.856 C90.2866648,13.0266675 89.9773346,13.2346654 89.732,13.48 L88.74,12.312 C89.1773355,11.9066646 89.6813305,11.6026677 90.252,11.4 C90.8226695,11.1973323 91.4013304,11.096 91.988,11.096 C92.6706701,11.096 93.2333311,11.191999 93.676,11.384 C94.1186689,11.576001 94.4679987,11.8266651 94.724,12.136 C94.9800013,12.4453349 95.1586662,12.7919981 95.26,13.176 C95.3613338,13.5600019 95.412,13.9439981 95.412,14.328 L95.412,19 L93.62,19 L93.62,18.024 Z M93.588,15.496 L93.156,15.496 C92.8466651,15.496 92.521335,15.5093332 92.18,15.536 C91.838665,15.5626668 91.5240014,15.6213329 91.236,15.712 C90.9479986,15.8026671 90.708001,15.9306658 90.516,16.096 C90.323999,16.2613342 90.228,16.4879986 90.228,16.776 C90.228,16.9573342 90.2679996,17.1093327 90.348,17.232 C90.4280004,17.3546673 90.5319994,17.453333 90.66,17.528 C90.7880006,17.602667 90.9319992,17.6559998 91.092,17.688 C91.2520008,17.7200002 91.4119992,17.736 91.572,17.736 C92.2333366,17.736 92.734665,17.5600018 93.076,17.208 C93.417335,16.8559982 93.588,16.376003 93.588,15.768 L93.588,15.496 Z'
                            fill='#06C' opacity='.8' />
                    </g>
                  </svg>
                </li>
                <li className="list-item zeroEx disabled">
                  <svg width='100' height='26' viewBox='0 0 100 26' xmlns='http://www.w3.org/2000/svg' style={{backgroundColor: '#fff'}}>
                    <g id='zeroExLogo' fill='#000' fillRule='nonzero'>
                      <path d='M64.21875,14.4181818 C64.21875,15.1636364 64.1269531,15.8 63.9617188,16.3636364 C63.7964844,16.9272727 63.5394531,17.4 63.2273438,17.7818182 C62.896875,18.1636364 62.5113281,18.4545455 62.0523438,18.6363636 C61.5933594,18.8363636 61.0609375,18.9272727 60.4734375,18.9272727 C59.9042969,18.9272727 59.371875,18.8363636 58.9128906,18.6363636 C58.4539063,18.4363636 58.05,18.1636364 57.7195313,17.7818182 C57.3890625,17.4 57.1503906,16.9272727 56.9667969,16.3636364 C56.7832031,15.8 56.7097656,15.1454545 56.7097656,14.4181818 L56.7097656,11.6909091 C56.7097656,10.9454545 56.8015625,10.3090909 56.9667969,9.74545455 C57.1503906,9.18181818 57.3890625,8.70909091 57.7195313,8.32727273 C58.05,7.94545455 58.4355469,7.65454545 58.8945313,7.47272727 C59.3535156,7.27272727 59.8859375,7.18181818 60.4550781,7.18181818 C61.0425781,7.18181818 61.5566406,7.27272727 62.0339844,7.47272727 C62.4929688,7.67272727 62.896875,7.94545455 63.2273438,8.32727273 C63.5578125,8.70909091 63.7964844,9.18181818 63.9800781,9.74545455 C64.1636719,10.3090909 64.2371094,10.9636364 64.2371094,11.6909091 L64.2371094,14.4181818 L64.21875,14.4181818 Z M58.6007813,13.7090909 L62.2910156,10.9818182 C62.2542969,10.2 62.0707031,9.61818182 61.7769531,9.25454545 C61.4648438,8.87272727 61.0242188,8.69090909 60.4550781,8.69090909 C59.8308594,8.69090909 59.371875,8.90909091 59.0597656,9.34545455 C58.7476563,9.78181818 58.6007813,10.4545455 58.6007813,11.3454545 L58.6007813,13.7090909 Z M62.309375,12.4545455 L58.6191406,15.1818182 C58.7109375,16.6727273 59.3351563,17.4363636 60.4734375,17.4363636 C61.7035156,17.4363636 62.3277344,16.5454545 62.3277344,14.7636364 L62.3277344,12.4545455 L62.309375,12.4545455 Z'
                            id='Shape' />
                      <polygon id='Shape' points='70.1488281 12.7818182 72.2050781 9.90909091 74.3164062 9.90909091 71.2871094 14.0909091 74.4082031 18.4 72.296875 18.4 70.1671875 15.4181818 68.0558594 18.4 65.9445312 18.4 69.065625 14.0909091 66.0363281 9.90909091 68.1476562 9.90909091'
                      />
                      <path d='M31.5585938,23.2363636 L38.7554687,17.9090909 L40.7933594,19.8909091 C42.1335937,19.2909091 43.2535156,18.3090909 44.0429687,17.0727273 C44.2449219,17.3272727 44.446875,17.5818182 44.6488281,17.8363636 C45.3832031,18.7818182 46.0808594,19.7090909 46.7234375,20.6 C45.9339844,21.5272727 45.0160156,22.3272727 43.9878906,22.9818182 C41.9132812,24.2909091 39.4347656,24.9818182 36.7910156,24.8181818 C34.8816406,24.6909091 33.1007812,24.1272727 31.5585938,23.2363636 Z M27.1890625,7.10909091 L32.6234375,14.1636364 L30.6039063,16.2 C31.228125,17.5272727 32.2195313,18.6363636 33.4496094,19.4181818 C33.1925781,19.6181818 32.9355469,19.8181818 32.6785156,20.0181818 C31.7238281,20.7454545 30.7875,21.4363636 29.8878906,22.0727273 C28.9515625,21.2909091 28.14375,20.3818182 27.4828125,19.3636364 C26.1609375,17.3272727 25.4632813,14.8545455 25.6285156,12.2363636 C25.7570313,10.3636364 26.3078125,8.63636364 27.1890625,7.10909091 Z M43.565625,2.76363636 L36.2585937,7.96363636 L34.3308594,6.10909091 C32.990625,6.72727273 31.8707031,7.70909091 31.08125,8.92727273 C30.8792969,8.67272727 30.6773437,8.41818182 30.4753906,8.16363636 C29.7410156,7.21818182 29.0433594,6.29090909 28.4007812,5.4 C29.1902344,4.47272727 30.1082031,3.67272727 31.1363281,3.01818182 C33.1925781,1.70909091 35.6894531,1.01818182 38.3332031,1.18181818 C40.2425781,1.30909091 42.0234375,1.87272727 43.565625,2.76363636 Z M47.9535156,18.8363636 L42.6109375,11.8363636 L44.5570312,9.83636364 L44.5386719,9.8 C43.9144531,8.49090909 42.9230469,7.36363636 41.6746094,6.58181818 C41.9316406,6.38181818 42.1886719,6.18181818 42.4457031,5.98181818 C43.4003906,5.25454545 44.3367187,4.56363636 45.2363281,3.92727273 C46.1726562,4.70909091 46.9804687,5.61818182 47.6414062,6.63636364 C48.9632812,8.69090909 49.6609375,11.1454545 49.4957031,13.7636364 C49.3671875,15.6181818 48.8164062,17.3272727 47.9535156,18.8363636 Z'
                            id='Combined-Shape' />
                    </g>
                  </svg>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <button type="button" value="Create Report" onClick={this.fetchData}
                disabled={!this.state.accounts.length}>
          CREATE REPORT
        </button>
      </section>
    )
  }
}

export default TaxExporter;
